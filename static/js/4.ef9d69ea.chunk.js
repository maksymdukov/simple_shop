(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{718:function(e,t,a){e.exports=a.p+"static/media/notification.2ade5fe7.mp3"},723:function(e,t,a){"use strict";a.r(t);var n=a(26),r=a(0),o=a.n(r),i=a(35),c=a(43),l=function(e){return{root:{display:"flex",marginBottom:"-40px",minHeight:"calc(100vh - 367px)"},content:{padding:10,flex:1,background:e.palette.background.paper,position:"relative"},paper:{position:"sticky",overflow:"hidden"}}},s=a(1),d=function(e){return{sidebar:{padding:"".concat(2*e.spacing.unit,"px ").concat(7*e.spacing.unit,"px ").concat(2*e.spacing.unit,"px ").concat(2*e.spacing.unit,"px"),position:"relative",top:0,bottom:0,width:200,minHeight:"100%",transition:e.transitions.create(["margin"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),display:"flex",flexDirection:"column"},sidebarClosed:{marginLeft:"-160px"},list:{position:"sticky",top:100,listStyle:"none",paddingLeft:0},route:{borderBottom:"1px solid transparent",textDecoration:"none",display:"inline-block",color:"inherit",transition:"color .2s linear","&:link, &:active":{textDecoration:"none",color:"inherit"},"&:hover":{textDecoration:"none",color:e.palette.primary.main}},activeRoute:{color:"red",borderBottom:"1px solid ".concat(e.palette.primary.main)},toggleBtnWrapper:{position:"absolute",right:0,top:0,bottom:0,backgroundColor:e.palette.common.grey,width:40,flexDirection:"column",justifyContent:"flex-start"},arrowWrapper:{position:"sticky",top:150},arrow:{position:"sticky",top:0,transform:"rotate(180deg)",transition:e.transitions.create(["transform"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.standard})},rotate:{transform:"rotate(0deg)"}}},m=a(717),u=a.n(m),p=a(44),f=a(29),g=Object(c.withStyles)(d)(Object(f.g)(function(e){var t=e.classes,a=e.onToggle,n=e.isOpened,r=e.match,i=[t.sidebar],c=[t.arrow];return n||(i.push(t.sidebarClosed),c.push(t.rotate)),o.a.createElement("aside",{className:i.join(" ")},o.a.createElement(s.d,{className:t.toggleBtnWrapper,onClick:a},o.a.createElement("div",{className:t.arrowWrapper},o.a.createElement(u.a,{className:c.join(" ")}))),o.a.createElement("ul",{className:t.list},o.a.createElement("li",null,o.a.createElement(p.c,{className:t.route,to:"".concat(r.url,"/last-orders"),activeClassName:t.activeRoute},"Orders Live"))))})),b=a(9),E=a(104),h=function(e){return{transitionItem:{"&-enter":{opacity:0},"&-enter-active":{opacity:1,transition:"opacity 500ms ease-in"},"&-exit":{opacity:1},"&-exit-active":{opacity:0,transition:"opacity 500ms ease-in"}},transitionItemEnter:{opacity:0,transition:"opacity 500ms ease-in"},transitionItemEnterActive:{opacity:1,transition:"opacity 500ms ease-in"}}},v=a(25),y=a(724),x=a(725),k=a(718),O=a.n(k),j=a(304),w=a(303),I=function(e){return{price:{color:e.palette.primary.main},container:{},isChecked:{textAlign:"center"}}},N=Object(c.withStyles)(I)(function(e){var t=e.classes,a=e.order,n=e.orderId,r=new Date(a.timestamp);return o.a.createElement(s.t,{container:!0,className:t.container},o.a.createElement(s.t,{item:!0,xs:3},r.toLocaleString()),o.a.createElement(s.t,{item:!0,xs:6},o.a.createElement(s.t,{container:!0,direction:"column"},o.a.createElement("div",null,"Email: ",o.a.createElement("b",null,a.email)),o.a.createElement("div",null,"Name: ",o.a.createElement("b",null,a.name)),o.a.createElement("div",null,"Phone: ",o.a.createElement("b",null,a.phone)),o.a.createElement("div",null,"Address: ",o.a.createElement("b",null,a.address)),o.a.createElement("div",null,"Registered: ",o.a.createElement("b",null,a.uid?"Yes":"No")))),o.a.createElement(s.t,{item:!0,xs:1},o.a.createElement(s.t,{container:!0,alignItems:"flex-end",direction:"column"},o.a.createElement("div",null,a.totalQuantity," ",a.totalQuantity>1?"items":"item"),o.a.createElement(s.L,{variant:"subtitle1",className:t.price},a.totalPrice," UAH"))),o.a.createElement(s.t,{item:!0,xs:2,className:t.isChecked},o.a.createElement(s.s,{onClick:function(e){return e.stopPropagation()},control:o.a.createElement(s.h,{checked:!!a.taken,onChange:function(e){v.a.database().ref("/orders/".concat(n)).update({taken:!a.taken})},value:String(!!a.taken)}),label:"Checked"})))}),S=a(51),C=Object(c.withStyles)(h)(function(e){var t=e.classes,a=Object(r.useRef)(null),i=Object(r.useState)(0),c=Object(n.a)(i,2)[1],l=Object(r.useState)([]),s=Object(n.a)(l,2),d=s[0],m=s[1],u=function(e){var t=e.val(),n=e.key;m(function(e){return[{order:t,orderId:n}].concat(Object(E.a)(e))}),c(function(e){return e>9&&a.current.play(),e+1})},p=function(e){console.log("child changed");var t=e.key,a=e.val();m(function(e){var n=e.findIndex(function(e){return e.orderId===t});console.log(n);var r=Object(b.a)({},e[n],{order:Object(b.a)({},e[n].order,a)}),o=Object(E.a)(e);return o[n]=r,console.log(o),o}),console.log(e.val())},f=function(e){console.log(e)};return Object(r.useEffect)(function(){return console.log("subscribe"),v.a.database().ref("/orderIds").once("value").then(function(e){return console.log(e.val())}),v.a.database().ref("/orders").limitToLast(10).on("child_added",u,f),v.a.database().ref("/orders").limitToLast(10).on("child_changed",p,f),function(){console.log("unsubscribe"),v.a.database().ref("/orders").off("child_added",u),v.a.database().ref("/orders").off("child_changed",p)}},[]),o.a.createElement("div",null,o.a.createElement("audio",{ref:a},o.a.createElement("source",{src:O.a,type:"audio/mpeg"})),"New orders",!d.length&&o.a.createElement(S.a,null),o.a.createElement(y.a,null,d.map(function(e){return o.a.createElement(x.a,{key:e.orderId,timeout:500,classNames:"".concat(t.transitionItem)},o.a.createElement(j.a,{key:e.orderId,cardSummary:function(){return o.a.createElement(N,{order:e.order,orderId:e.orderId})},cardDetails:function(){return o.a.createElement(w.a,{order:e.order,orderId:e.orderId})},order:e.order}))})))});t.default=Object(c.withStyles)(l)(Object(f.g)(function(e){var t=e.classes,a=e.match,c=Object(r.useState)(!0),l=Object(n.a)(c,2),s=l[0],d=l[1];return o.a.createElement("section",{className:t.root},o.a.createElement(i.a,{title:"Manager panel"}),o.a.createElement(g,{isOpened:s,onToggle:function(){return d(!s)}}),o.a.createElement("div",{className:t.content},o.a.createElement(f.b,{path:"".concat(a.url,"/last-orders"),component:C})))}))}}]);
//# sourceMappingURL=4.ef9d69ea.chunk.js.map